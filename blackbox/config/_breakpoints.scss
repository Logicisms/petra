//
//  Breakpoints
//

//$_breakpoint-get-path:  map-deep-get($settings, grid, breakpoints);
$_breakpoint-get-path:  map-deep-get($petra, grid, breakpoints) !default;
$_breakpoint-get-keys:  map-deep-keys($_breakpoint-get-path);

@function _breakpoint-get-name($key) {
    $i: map-deep-get($_breakpoint-get-path, $key, name);
    @return unquote($i);
}
@function _breakpoint-get-shorthand($key) {
    $i: map-deep-get($_breakpoint-get-path, $key, shorthand);
    @return unquote($i);
}
@function _breakpoint-get-query($key) {
    @return map-deep-get($_breakpoint-get-path, $key, query);
}
@function _breakpoint-build-query($arg) {
    $base: ();
    @each $property, $value in ($arg) {
        $base: append($base, unquote("and (#{$property}: #{$value})"), space);
    }
    @return $base;
}

@mixin respond-to($breakpoint...) {
    @for $index from 1 through length($breakpoint) {
        $i: nth($breakpoint, $index);
        
        @if map-has-key($_breakpoint-get-path, $i) {
            $query:     _breakpoint-get-query($i);

            @media screen #{_breakpoint-build-query($query)} {
                @content;
            }
        } @else {
            @include debug(debug-message('respond-to'), debug-flag('respond-to'));
        }
    }
}

